shadow$provide.module$node_modules$slip$src$slip=function(global,require,module,exports$jscomp$0){(function(root,factory){"object"===typeof exports$jscomp$0?(root.slip=exports$jscomp$0,factory(exports$jscomp$0)):"function"===typeof define&&define.amd?define(["exports"],function(exports){root.slip=exports;return root.slip,factory(exports)}):(root.slip={},factory(root.slip))})(this,function(exports){exports.END=192;exports.ESC=219;exports.ESC_END=220;exports.ESC_ESC=221;exports.byteArray=function(data,
offset,length){return data instanceof ArrayBuffer?new Uint8Array(data,offset,length):data};exports.expandByteArray=function(arr){var expanded=new Uint8Array(2*arr.length);expanded.set(arr);return expanded};exports.sliceByteArray=function(arr,start,end){arr=arr.buffer.slice?arr.buffer.slice(start,end):arr.subarray(start,end);return new Uint8Array(arr)};exports.encode=function(data,o){o=o||{};o.bufferPadding=o.bufferPadding||4;data=exports.byteArray(data,o.offset,o.byteLength);o=new Uint8Array(data.length+
o.bufferPadding+3&-4);var j=1;o[0]=exports.END;for(var i=0;i<data.length;i++){j>o.length-3&&(o=exports.expandByteArray(o));var val=data[i];val===exports.END?(o[j++]=exports.ESC,val=exports.ESC_END):val===exports.ESC&&(o[j++]=exports.ESC,val=exports.ESC_ESC);o[j++]=val}o[j]=exports.END;return exports.sliceByteArray(o,0,j+1)};exports.Decoder=function(o){o="function"!==typeof o?o||{}:{onMessage:o};this.maxMessageSize=o.maxMessageSize||10485760;this.bufferSize=o.bufferSize||1024;this.msgBuffer=new Uint8Array(this.bufferSize);
this.msgBufferIdx=0;this.onMessage=o.onMessage;this.onError=o.onError;this.escape=!1};var p=exports.Decoder.prototype;p.decode=function(data){data=exports.byteArray(data);for(var msg,i=0;i<data.length;i++){var val=data[i];if(this.escape)val===exports.ESC_ESC?val=exports.ESC:val===exports.ESC_END&&(val=exports.END);else{if(val===exports.ESC){this.escape=!0;continue}if(val===exports.END){msg=this.handleEnd();continue}}this.addByte(val)||this.handleMessageMaxError()}return msg};p.handleMessageMaxError=
function(){if(this.onError)this.onError(this.msgBuffer.subarray(0),"The message is too large; the maximum message size is "+this.maxMessageSize/1024+"KB. Use a larger maxMessageSize if necessary.");this.msgBufferIdx=0;this.escape=!1};p.addByte=function(val){this.msgBufferIdx>this.msgBuffer.length-1&&(this.msgBuffer=exports.expandByteArray(this.msgBuffer));this.msgBuffer[this.msgBufferIdx++]=val;this.escape=!1;return this.msgBuffer.length<this.maxMessageSize};p.handleEnd=function(){if(0!==this.msgBufferIdx){var msg=
exports.sliceByteArray(this.msgBuffer,0,this.msgBufferIdx);if(this.onMessage)this.onMessage(msg);this.msgBufferIdx=0;return msg}};return exports})}
//# sourceMappingURL=module$node_modules$slip$src$slip.js.map
