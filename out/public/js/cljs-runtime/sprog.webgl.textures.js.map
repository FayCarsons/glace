{"version":3,"sources":["sprog/webgl/textures.cljs"],"mappings":"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","names":["js/sprog","js/sprog.webgl","js/sprog.webgl.textures","js/sprog.webgl.textures.framebuffer-map-atom","sprog.webgl.textures/framebuffer-map-atom","cljs.core.atom","sprog.webgl.textures/get-framebuffer","gl","textures","temp__5802__auto__","framebuffer","G__31007","fexpr__31006","cljs.core/deref","seq__31008","cljs.core/seq","chunk__31009","count__31010","i__31011","vec__31039","cljs.core.nth","temp__5804__auto__","cljs.core/chunked-seq?","c__5565__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","vec__31050","cljs.core/first","cljs.core/next","texture","index","cljs.core.map","cljs.core/list","cljs.core.range","cljs.core/vector?","cljs.core/second","cljs.core.swap_BANG_","cljs.core/assoc","sprog.webgl.textures/target-screen!","var_args","args__5772__auto__","len__5766__auto__","i__5767__auto__","argseq__5773__auto__","cljs.core/IndexedSeq","sprog.webgl.textures/target-textures!","seq31059","G__31060","self__5751__auto__","p1__31058#","sprog.webgl.textures/set-tex-parameters","p__31083","vec__31084","seq31073","G__31074","G__31075","G__31076","G__31077","filter-mode","wrap-mode","three-d?","texture-target","gl-filter-mode","fexpr__31090","vec__31091","wrap-mode->gl-enum","mode","G__31094","cljs.core/Keyword","gl-wrap-s","gl-wrap-t","gl-wrap-r","cljs.core/coll?","cljs.core.repeat","sprog.webgl.textures/set-tex-data!","p__31126","vec__31127","map__31130","cljs.core/--destructure-map","cljs.core.get","seq31111","G__31112","G__31113","G__31114","G__31115","G__31116","tex","texture-type","resolution","data","channels","cljs.core._EQ_","internal-format","G__31134","fexpr__31133","fexpr__31135","format","G__31138","fexpr__31137","fexpr__31139","webgl-type","fexpr__31140","vec__31141","width","height","depth","vec__31144","sprog.webgl.textures/create-tex","p__31154","vec__31155","map__31158","seq31148","G__31149","G__31150","G__31151","options","sprog.webgl.textures.set_tex_data_BANG_","sprog.webgl.textures.set_tex_parameters","or__5043__auto__","sprog.webgl.textures/delete-tex","seq31164","G__31165","seq__31170","chunk__31171","count__31172","i__31173","cljs.core.filter","cljs.core/identity","cljs.core/flatten","sprog.webgl.textures/tex-data-array","size","sprog.webgl.textures.target_textures_BANG_","vec__31182","x","y","cljs.core.into","array","G__31185","js/Error","js/Uint8Array","js/Uint16Array","js/Uint32Array","G__31186","sprog.webgl.textures/copy-html-image-data!","element-or-id","element","js/document","sprog.webgl.textures/html-image-tex","p__31191","vec__31192","map__31195","seq31187","G__31188","G__31189","sprog.webgl.textures/create-webcam-video-element","p__31202","vec__31204","map__31207","seq31200","G__31201","callback","brightness","media-constraints","cljs.core/clj->js","video","js/document.createElement","js/navigator.mediaDevices.getUserMedia","media-stream","e","sprog.webgl.textures/max-tex-size"],"sourcesContent":["(ns sprog.webgl.textures)\n\n(defonce framebuffer-map-atom (atom {}))\n\n(defn get-framebuffer [gl textures]\n  (if-let [framebuffer (@framebuffer-map-atom [gl textures])]\n    framebuffer\n    (let [framebuffer (.createFramebuffer gl)]\n      (.bindFramebuffer gl gl.FRAMEBUFFER framebuffer)\n      (doseq [[texture index] (map list textures (range))]\n        (if (vector? texture)\n          (.framebufferTextureLayer gl\n                                    gl.FRAMEBUFFER\n                                    (+ gl.COLOR_ATTACHMENT0 index)\n                                    (first texture)\n                                    0\n                                    (second texture))\n          (.framebufferTexture2D gl\n                                 gl.FRAMEBUFFER\n                                 (+ gl.COLOR_ATTACHMENT0 index)\n                                 gl.TEXTURE_2D\n                                 texture\n                                 0)))\n      (swap! framebuffer-map-atom assoc [gl textures] framebuffer)\n      framebuffer)))\n\n(defn target-screen! [gl]\n  (.bindFramebuffer gl gl.FRAMEBUFFER nil))\n\n(defn target-textures! [gl & textures]\n  (.bindFramebuffer gl gl.FRAMEBUFFER (get-framebuffer gl textures))\n  (.drawBuffers gl (map #(+ gl.COLOR_ATTACHMENT0 %)\n                        (range (count textures)))))\n\n(defn set-tex-parameters [gl texture filter-mode wrap-mode & [three-d?]]\n  (let [texture-target (if three-d? gl.TEXTURE_3D gl.TEXTURE_2D)]\n    (.bindTexture gl texture-target texture)\n    (let [gl-filter-mode ({:linear gl.LINEAR\n                           :nearest gl.NEAREST}\n                          filter-mode)]\n      (.texParameteri gl\n                      texture-target\n                      gl.TEXTURE_MIN_FILTER\n                      gl-filter-mode)\n      (.texParameteri gl\n                      texture-target\n                      gl.TEXTURE_MAG_FILTER\n                      gl-filter-mode))\n    (let [wrap-mode->gl-enum (fn [mode]\n                               (case mode\n                                 :clamp gl.CLAMP_TO_EDGE\n                                 :repeat gl.REPEAT\n                                 :mirror gl.MIRRORED_REPEAT\n                                 mode))\n          [gl-wrap-s gl-wrap-t gl-wrap-r]\n          (if (coll? wrap-mode)\n            (map wrap-mode->gl-enum wrap-mode)\n            (repeat (wrap-mode->gl-enum wrap-mode)))]\n      (.texParameteri gl\n                      texture-target\n                      gl.TEXTURE_WRAP_S\n                      gl-wrap-s)\n      (.texParameteri gl\n                      texture-target\n                      gl.TEXTURE_WRAP_T\n                      gl-wrap-t)\n      (when three-d?\n        (.texParameteri gl\n                        texture-target\n                        gl.TEXTURE_WRAP_R\n                        gl-wrap-r)))))\n\n(defn set-tex-data! [gl tex texture-type resolution data\n                     & [{:keys [channels]\n                         :or {channels 4}}]]\n  (let [three-d? (and (not (number? resolution))\n                      (= (count resolution) 3))\n        texture-target (if three-d? gl.TEXTURE_3D gl.TEXTURE_2D)]\n    (.bindTexture gl texture-target tex)\n    (let [internal-format (({:f8 [gl.R8 gl.RG8 gl.RGB8 gl.RGBA]\n                             :u16 [gl.R16UI gl.RG16UI gl.RGB16UI gl.RGBA16UI]\n                             :u32 [gl.R32UI gl.RG32UI gl.RGB32UI gl.RGBA32UI]}\n                            texture-type)\n                           (dec channels))\n          format (({:f8 [gl.RED gl.RG gl.RGB gl.RGBA]\n                    :u16 [gl.RED_INTEGER\n                          gl.RG_INTEGER\n                          gl.RGB_INTEGER\n                          gl.RGBA_INTEGER]\n                    :u32 [gl.RED_INTEGER\n                          gl.RG_INTEGER\n                          gl.RGB_INTEGER\n                          gl.RGBA_INTEGER]}\n                   texture-type)\n                  (dec channels))\n          webgl-type ({:f8 gl.UNSIGNED_BYTE\n                       :u16 gl.UNSIGNED_SHORT\n                       :u32 gl.UNSIGNED_INT}\n                      texture-type)]\n      (if three-d?\n        (let [[width height depth] resolution]\n          (.texImage3D gl\n                       gl.TEXTURE_3D\n                       0\n                       internal-format\n                       width\n                       height\n                       depth\n                       0\n                       format\n                       webgl-type\n                       data))\n        (let [[width height] (if (number? resolution)\n                               [resolution resolution]\n                               resolution)]\n          (.texImage2D gl\n                       gl.TEXTURE_2D\n                       0\n                       internal-format\n                       width\n                       height\n                       0\n                       format\n                       webgl-type\n                       data))))\n    (.bindTexture gl texture-target nil)\n    tex))\n\n(defn create-tex [gl\n                  texture-type\n                  resolution\n                  & [{:keys [wrap-mode\n                             filter-mode\n                             channels\n                             data]\n                      :or {wrap-mode :repeat\n                           channels 4}\n                      :as options}]]\n  (let [three-d? (and (not (number? resolution))\n                      (= (count resolution) 3))\n        texture-target (if three-d? gl.TEXTURE_3D gl.TEXTURE_2D)\n        tex (.createTexture gl texture-target)]\n    (set-tex-data! gl tex texture-type resolution data options)\n    (.bindTexture gl texture-target tex)\n    (set-tex-parameters gl\n                        tex\n                        (or filter-mode\n                            (if (= texture-type :f8)\n                              :linear\n                              :nearest))\n                        wrap-mode\n                        three-d?)\n    (.bindTexture gl texture-target nil)\n    tex))\n\n(defn delete-tex [gl & textures]\n  (doseq [tex (filter identity (flatten textures))]\n    (.deleteTexture gl tex)))\n\n(defn tex-data-array [gl texture texture-type size]\n  (target-textures! gl texture)\n  (let [[x y width height]\n        (cond\n          (number? size) [0 0 size size]\n          (= (count size) 2) (into [0 0] size)\n          (= (count size) 4) size)\n        array (case texture-type\n                :f8 (js/Uint8Array. (* width height 4))\n                :u16 (js/Uint16Array. (* width height 4))\n                :u32 (js/Uint32Array. (* width height 4)))]\n    (case texture-type\n      :f8\n      (.readPixels gl x y width height gl.RGBA gl.UNSIGNED_BYTE array)\n      :u16\n      (.readPixels gl x y width height gl.RGBA_INTEGER gl.UNSIGNED_SHORT array)\n      :u32\n      (.readPixels gl x y width height gl.RGBA_INTEGER gl.UNSIGNED_INT array))\n    array))\n\n(defn copy-html-image-data! [gl tex element-or-id]\n  (let [element (if (string? element-or-id)\n                  (.getElementById js/document element-or-id)\n                  element-or-id)]\n    (.bindTexture gl gl.TEXTURE_2D tex)\n    (.texImage2D gl\n                 gl.TEXTURE_2D\n                 0\n                 gl.RGBA\n                 gl.RGBA\n                 gl.UNSIGNED_BYTE\n                 element)))\n\n(defn html-image-tex [gl element-or-id & [{:keys [wrap-mode\n                                                  filter-mode]\n                                           :or {wrap-mode :repeat\n                                                filter-mode :linear}}]]\n  (let [texture (.createTexture gl)]\n    (.bindTexture gl gl.TEXTURE_2D texture)\n    (set-tex-parameters gl texture filter-mode wrap-mode)\n    (copy-html-image-data! gl texture element-or-id)\n    texture))\n\n(defn create-webcam-video-element [callback & [{:keys [width \n                                                       height \n                                                       brightness]\n                                                :or {width 1024\n                                                     height 1024\n                                                     brightness 2}}]]\n  (let [media-constraints (clj->js {:audio false\n                                    :video {:width width\n                                            :height height\n                                            :brightness {:ideal brightness}}})\n        video (js/document.createElement \"video\")]\n    (.then (js/navigator.mediaDevices.getUserMedia media-constraints)\n           (fn [media-stream]\n             (set! video.srcObject media-stream)\n             (.setAttribute video \"playsinline\" true)\n             (set! video.onloadedmetadata\n                   (fn [e]\n                     (.play video)\n                     (callback video)))))))\n\n(defn max-tex-size [gl]\n  (.getParameter gl gl.MAX_TEXTURE_SIZE))\n"]}