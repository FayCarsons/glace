{"version":3,"sources":["sprog/webgl/core.cljs"],"mappings":"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","names":["js/sprog","js/sprog.webgl","js/sprog.webgl.core","js/sprog.webgl.core.sprogs-atom","sprog.webgl.core/sprogs-atom","cljs.core.atom","sprog.webgl.core/update-sprogs!","seq__44175","cljs.core/seq","chunk__44176","count__44177","i__44178","temp__5804__auto__","cljs.core/chunked-seq?","c__5565__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","cljs.core/first","cljs.core/next","sprog","cljs.core/deref","cljs.core/vals","map__44183","cljs.core/--destructure-map","cljs.core.get","map__44185","state","gl","update-fn","cljs.core.swap_BANG_","cljs.core/assoc","js/requestAnimationFrame","var_args","args__5772__auto__","len__5766__auto__","i__5767__auto__","argseq__5773__auto__","cljs.core/IndexedSeq","sprog.webgl.core/start-sprog!","p__44190","vec__44191","map__44194","cljs.core.nth","seq44187","G__44188","G__44189","self__5751__auto__","init-fn-or-value","name","append-to-body?","preserve-drawing-buffer?","stencil?","old-canvas","js/document.getElementById","sprog.dom.canvas.create_gl_canvas","cljs.core/fn?","G__44197","sprog.webgl.core/stop-sprog!","js/Error","sprog-name","cljs.core/dissoc","sprog.webgl.core.stop_sprog_BANG_","sprog.webgl.core/sprog-state","seq44199","self__5752__auto__","G__44201","fexpr__44200","or__5043__auto__","G__44203","sprog.webgl.core/set-sprog-state!","new-state","cljs.core/update","cljs.core/reset!","sprog.webgl.core.set_sprog_state_BANG_","G__44206","sprog.webgl.core/update-sprog-state!","cljs.core.get_in","sprog.webgl.core.update_sprog_state_BANG_","G__44213","sprog.webgl.core/merge-sprog-state!","new-state-map","p1__44210#","cljs.core.merge","sprog.webgl.core.merge_sprog_state_BANG_","sprog.webgl.core/sprog-context","seq44215","G__44219","fexpr__44218","sprog.webgl.core/clear!","seq44222","G__44223","clear-masks","cljs.core.apply","cljs.core/bit-or","p1__44221#","cljs.core.map","fexpr__44227","sprog.webgl.core/enable!","seq44228","G__44229","enable-values","seq__44230","chunk__44231","count__44232","i__44233","enable-value","fexpr__44236","fexpr__44238","sprog.webgl.core/disable!","seq44240","G__44241","seq__44248","chunk__44249","count__44250","i__44251","fexpr__44261","fexpr__44263","sprog.webgl.core/set-stencil-func!","p__44268","vec__44272","seq44265","G__44266","G__44267","func","ref","mask","fexpr__44275","G__44287","sprog.webgl.core/set-stencil-op!","fail","zfail","zpass","vec__44288","gl-fail","gl-zfail","gl-zpass","op-param","fexpr__44291","all","sprog.webgl.core.set_stencil_op_BANG_","G__44297","sprog.webgl.core/set-color-mask!","r","g","b","a","cljs.core/boolean","all-channels","sprog.webgl.core.set_color_mask_BANG_"],"sourcesContent":["(ns sprog.webgl.core\n  (:require [sprog.util :as u]\n            [sprog.dom.canvas :refer [create-gl-canvas]]))\n\n(defonce sprogs-atom (atom nil))\n\n(defn update-sprogs! []\n  (doseq [sprog (vals @sprogs-atom)]\n    (when-let [{:keys [state gl update-fn]} sprog]\n      (swap! state assoc :gl gl)\n      (when update-fn (swap! state update-fn))\n      (swap! state assoc :gl gl)))\n  (js/requestAnimationFrame update-sprogs!))\n\n(defn start-sprog! [init-fn-or-value\n                    update-fn\n                    & [{:keys [name\n                               append-to-body?\n                               preserve-drawing-buffer?\n                               stencil?]\n                        :or {name :default\n                             append-to-body? true}}]]\n  (when-let [old-canvas (js/document.getElementById (str name))]\n    (.removeChild old-canvas.parentNode old-canvas))\n  (when (nil? @sprogs-atom) (update-sprogs!))\n  (let [gl (create-gl-canvas\n            name\n            {:append-to-body? append-to-body?\n             :preserve-drawing-buffer? preserve-drawing-buffer?\n             :stencil? stencil?})]\n    (swap! sprogs-atom\n           assoc\n           name\n           {:state (atom\n                    (if (fn? init-fn-or-value)\n                      (init-fn-or-value gl)\n                      init-fn-or-value))\n            :gl gl\n            :update-fn update-fn})))\n\n(defn stop-sprog!\n  ([sprog-name] (swap! sprogs-atom dissoc sprog-name))\n  ([] (stop-sprog! :default)))\n\n(defn sprog-state [& sprog-name]\n  @(:state (@sprogs-atom (or sprog-name :default))))\n\n(defn set-sprog-state!\n  ([sprog-name new-state]\n   (swap! sprogs-atom\n          update\n          sprog-name\n          update\n          :state\n          (fn [state]\n            (reset! state new-state)\n            state))\n   new-state)\n  ([new-state]\n   (set-sprog-state! :default new-state)))\n\n(defn update-sprog-state!\n  ([sprog-name update-fn]\n   (swap! (get-in @sprogs-atom [sprog-name :state])\n          update-fn)\n   @(get-in @sprogs-atom [sprog-name :state]))\n  ([update-fn]\n   (update-sprog-state! :default update-fn)))\n\n(defn merge-sprog-state!\n  ([sprog-name new-state-map]\n   (update-sprog-state! sprog-name #(merge % new-state-map)))\n  ([new-state-map] (merge-sprog-state! :default new-state-map)))\n\n(defn sprog-context [& sprog-name]\n  (:gl (@sprogs-atom (or sprog-name :default))))\n\n(defn clear! [gl & clear-masks]\n  (.clear gl (apply bit-or (map #(or ({:color gl.COLOR_BUFFER_BIT\n                                       :depth gl.DEPTH_BUFFER_BIT\n                                       :stencil gl.STENCIL_BUFFER_BIT\n                                       :all (bit-or gl.COLOR_BUFFER_BIT\n                                                    gl.DEPTH_BUFFER_BIT\n                                                    gl.STENCIL_BUFFER_BIT)}\n                                      %)\n                                     %)\n                                clear-masks))))\n\n(defn enable! [gl & enable-values]\n  (doseq [enable-value enable-values]\n    (.enable gl\n             (or ({:blend gl.BLEND\n                   :cull-face gl.CULL_FACE\n                   :depth-test gl.DEPTH_TEST\n                   :dither gl.DITHER\n                   :polygon-offset-fill gl.POLYGON_OFFSET_FILL\n                   :sample-alpha-to-coverage gl.SAMPLE_ALPHA_TO_COVERAGE\n                   :sample-coverage gl.SAMPLE_COVERAGE\n                   :scissor-test gl.SCISSOR_TEST\n                   :stencil-test gl.STENCIL_TEST}\n                  enable-value)\n                 enable-value))))\n\n(defn disable! [gl & enable-values]\n  (doseq [enable-value enable-values]\n    (.disable gl\n              (or ({:blend gl.BLEND\n                    :cull-face gl.CULL_FACE\n                    :depth-test gl.DEPTH_TEST\n                    :dither gl.DITHER\n                    :polygon-offset-fill gl.POLYGON_OFFSET_FILL\n                    :sample-alpha-to-coverage gl.SAMPLE_ALPHA_TO_COVERAGE\n                    :sample-coverage gl.SAMPLE_COVERAGE\n                    :scissor-test gl.SCISSOR_TEST\n                    :stencil-test gl.STENCIL_TEST}\n                   enable-value)\n                  enable-value))))\n\n(defn set-stencil-func! [gl func & [ref mask]]\n  (.stencilFunc gl\n                (or ({:never gl.NEVER\n                      :less gl.LESS\n                      :< gl.LESS\n                      :equal gl.EQUAL\n                      := gl.EQUAL\n                      :lequal gl.LEQUAL\n                      :<= gl.LEQUAL\n                      :greater gl.GREATER\n                      :> gl.GREATER\n                      :not-equal gl.NOTEQUAL\n                      :not= gl.NOTEQUAL\n                      :gequal gl.GEQUAL\n                      :>= gl.GEQUAL\n                      :always gl.ALWAYS} func)\n                    func)\n                (or ref 0)\n                (or mask 0xff)))\n\n(defn set-stencil-op!\n  ([gl fail zfail zpass]\n   (let [[gl-fail gl-zfail gl-zpass]\n         (map (fn [op-param]\n                (or ({:keep gl.KEEP\n                      :zero gl.ZERO\n                      0 gl.ZERO\n                      :replace gl.REPLACE\n                      :incr gl.INCR\n                      :inc gl.INCR\n                      :incr-wrap gl.INCR_WRAP\n                      :inc-wrap gl.INCR_WRAP\n                      :decr gl.DECR\n                      :dec gl.DEC\n                      :decr-wrap gl.DECR_WARP\n                      :invert gl.INVERT}\n                     op-param)\n                    op-param\n                    gl.KEEP))\n              [fail zfail zpass])]\n     (.stencilOp gl gl-fail gl-zfail gl-zpass)))\n  ([gl all]\n   (set-stencil-op! gl all all all)))\n\n(defn set-color-mask!\n  ([gl r g b a]\n   (.colorMask gl (boolean r) (boolean g) (boolean b) (boolean a)))\n  ([gl all-channels]\n   (set-color-mask! gl all-channels all-channels all-channels all-channels)))\n"]}