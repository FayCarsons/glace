shadow$provide.module$node_modules$osc$src$osc=function(global,require,module,exports){var process=require("module$node_modules$process$browser"),Buffer=require("module$node_modules$buffer$index").Buffer,osc=osc||{};(function(){osc.SECS_70YRS=2208988800;osc.TWO_32=4294967296;osc.defaults={metadata:!1,unpackSingleArgs:!0};osc.isCommonJS="undefined"!==typeof module&&module.exports?!0:!1;osc.isNode=osc.isCommonJS&&"undefined"===typeof window;osc.isElectron="undefined"!==typeof process&&process.versions&&
process.versions.electron?!0:!1;osc.isBufferEnv=osc.isNode||osc.isElectron;osc.isArray=function(obj){return obj&&"[object Array]"===Object.prototype.toString.call(obj)};osc.isTypedArrayView=function(obj){return obj.buffer&&obj.buffer instanceof ArrayBuffer};osc.isBuffer=function(obj){return osc.isBufferEnv&&obj instanceof Buffer};osc.Long="undefined"!==typeof Long?Long:osc.isNode?require("module$node_modules$long$src$long"):void 0;osc.TextDecoder="undefined"!==typeof TextDecoder?new TextDecoder("utf-8"):
"undefined"!==typeof util&&typeof("undefined"!==util.TextDecoder)?new util.TextDecoder("utf-8"):void 0;osc.TextEncoder="undefined"!==typeof TextEncoder?new TextEncoder("utf-8"):"undefined"!==typeof util&&typeof("undefined"!==util.TextEncoder)?new util.TextEncoder("utf-8"):void 0;osc.dataView=function(obj,offset,length){return obj.buffer?new DataView(obj.buffer,offset,length):obj instanceof ArrayBuffer?new DataView(obj,offset,length):new DataView(new Uint8Array(obj),offset,length)};osc.byteArray=function(obj){if(obj instanceof
Uint8Array)return obj;var buf=obj.buffer?obj.buffer:obj;if(!(buf instanceof ArrayBuffer||"undefined"!==typeof buf.length&&"string"!==typeof buf))throw Error("Can't wrap a non-array-like object as Uint8Array. Object was: "+JSON.stringify(obj,null,2));return new Uint8Array(buf)};osc.nativeBuffer=function(obj){return osc.isBufferEnv?osc.isBuffer(obj)?obj:Buffer.from(obj.buffer?obj:new Uint8Array(obj)):osc.isTypedArrayView(obj)?obj:new Uint8Array(obj)};osc.copyByteArray=function(source,target,offset){if(osc.isTypedArrayView(source)&&
osc.isTypedArrayView(target))target.set(source,offset);else{var len=Math.min(target.length-offset,source.length),i=0;for(offset=void 0===offset?0:offset;i<len;i++,offset++)target[offset]=source[i]}return target};osc.readString=function(dv,offsetState){for(var charCodes=[],idx=offsetState.idx;idx<dv.byteLength;idx++){var charCode=dv.getUint8(idx);if(0!==charCode)charCodes.push(charCode);else{idx++;break}}offsetState.idx=idx+3&-4;return(osc.isBufferEnv?osc.readString.withBuffer:osc.TextDecoder?osc.readString.withTextDecoder:
osc.readString.raw)(charCodes)};osc.readString.raw=function(charCodes){for(var str="",i=0;i<charCodes.length;i+=1E4)str+=String.fromCharCode.apply(null,charCodes.slice(i,i+1E4));return str};osc.readString.withTextDecoder=function(charCodes){charCodes=new Int8Array(charCodes);return osc.TextDecoder.decode(charCodes)};osc.readString.withBuffer=function(charCodes){return Buffer.from(charCodes).toString("utf-8")};osc.writeString=function(str){var encoder=osc.isBufferEnv?osc.writeString.withBuffer:osc.TextEncoder?
osc.writeString.withTextEncoder:null;str+="\x00";var encodedStr;encoder&&(encodedStr=encoder(str));for(var len=encoder?encodedStr.length:str.length,arr=new Uint8Array(len+3&-4),i=0;i<len-1;i++){var charCode=encoder?encodedStr[i]:str.charCodeAt(i);arr[i]=charCode}return arr};osc.writeString.withTextEncoder=function(str){return osc.TextEncoder.encode(str)};osc.writeString.withBuffer=function(str){return Buffer.from(str)};osc.readPrimitive=function(dv,readerName,numBytes,offsetState){dv=dv[readerName](offsetState.idx,
!1);offsetState.idx+=numBytes;return dv};osc.writePrimitive=function(val,dv,writerName,numBytes,offset){offset=void 0===offset?0:offset;dv?numBytes=new Uint8Array(dv.buffer):(numBytes=new Uint8Array(numBytes),dv=new DataView(numBytes.buffer));dv[writerName](offset,val,!1);return numBytes};osc.readInt32=function(dv,offsetState){return osc.readPrimitive(dv,"getInt32",4,offsetState)};osc.writeInt32=function(val,dv,offset){return osc.writePrimitive(val,dv,"setInt32",4,offset)};osc.readInt64=function(dv,
offsetState){var high=osc.readPrimitive(dv,"getInt32",4,offsetState);dv=osc.readPrimitive(dv,"getInt32",4,offsetState);return osc.Long?new osc.Long(dv,high):{high,low:dv,unsigned:!1}};osc.writeInt64=function(val,dv,offset){var arr=new Uint8Array(8);arr.set(osc.writePrimitive(val.high,dv,"setInt32",4,offset),0);arr.set(osc.writePrimitive(val.low,dv,"setInt32",4,offset+4),4);return arr};osc.readFloat32=function(dv,offsetState){return osc.readPrimitive(dv,"getFloat32",4,offsetState)};osc.writeFloat32=
function(val,dv,offset){return osc.writePrimitive(val,dv,"setFloat32",4,offset)};osc.readFloat64=function(dv,offsetState){return osc.readPrimitive(dv,"getFloat64",8,offsetState)};osc.writeFloat64=function(val,dv,offset){return osc.writePrimitive(val,dv,"setFloat64",8,offset)};osc.readChar32=function(dv,offsetState){dv=osc.readPrimitive(dv,"getUint32",4,offsetState);return String.fromCharCode(dv)};osc.writeChar32=function(str,dv,offset){str=str.charCodeAt(0);if(!(void 0===str||-1>str))return osc.writePrimitive(str,
dv,"setUint32",4,offset)};osc.readBlob=function(dv,offsetState){var len=osc.readInt32(dv,offsetState),paddedLen=len+3&-4;dv=new Uint8Array(dv.buffer,offsetState.idx,len);offsetState.idx+=paddedLen;return dv};osc.writeBlob=function(data){data=osc.byteArray(data);var len=data.byteLength,arr=new Uint8Array((len+3&-4)+4),dv=new DataView(arr.buffer);osc.writeInt32(len,dv);arr.set(data,4);return arr};osc.readMIDIBytes=function(dv,offsetState){dv=new Uint8Array(dv.buffer,offsetState.idx,4);offsetState.idx+=
4;return dv};osc.writeMIDIBytes=function(bytes){bytes=osc.byteArray(bytes);var arr=new Uint8Array(4);arr.set(bytes);return arr};osc.readColor=function(dv,offsetState){dv=new Uint8Array(dv.buffer,offsetState.idx,4);var alpha=dv[3]/255;offsetState.idx+=4;return{r:dv[0],g:dv[1],b:dv[2],a:alpha}};osc.writeColor=function(color){return new Uint8Array([color.r,color.g,color.b,Math.round(255*color.a)])};osc.readTrue=function(){return!0};osc.readFalse=function(){return!1};osc.readNull=function(){return null};
osc.readImpulse=function(){return 1};osc.readTimeTag=function(dv,offsetState){var secs1900=osc.readPrimitive(dv,"getUint32",4,offsetState);dv=osc.readPrimitive(dv,"getUint32",4,offsetState);offsetState=0===secs1900&&1===dv?Date.now():osc.ntpToJSTime(secs1900,dv);return{raw:[secs1900,dv],native:offsetState}};osc.writeTimeTag=function(timeTag){timeTag=timeTag.raw?timeTag.raw:osc.jsToNTPTime(timeTag.native);var arr=new Uint8Array(8),dv=new DataView(arr.buffer);osc.writeInt32(timeTag[0],dv,0);osc.writeInt32(timeTag[1],
dv,4);return arr};osc.timeTag=function(secs,now){secs=secs||0;now=now||Date.now();var nowSecs=now/1E3;now=Math.floor(nowSecs);var secsWhole=Math.floor(secs);secs=nowSecs-now+(secs-secsWhole);1<secs&&(nowSecs=Math.floor(secs),secsWhole+=nowSecs,secs-=nowSecs);return{raw:[now+secsWhole+osc.SECS_70YRS,Math.round(osc.TWO_32*secs)]}};osc.ntpToJSTime=function(secs1900,frac){return 1E3*(secs1900-osc.SECS_70YRS+frac/osc.TWO_32)};osc.jsToNTPTime=function(jsTime){jsTime/=1E3;var secsWhole=Math.floor(jsTime);
return[secsWhole+osc.SECS_70YRS,Math.round(osc.TWO_32*(jsTime-secsWhole))]};osc.readArguments=function(dv,options,offsetState){var typeTagString=osc.readString(dv,offsetState);if(0!==typeTagString.indexOf(","))throw Error("A malformed type tag string was found while reading the arguments of an OSC message. String was: "+typeTagString," at offset: "+offsetState.idx);var argTypes=typeTagString.substring(1).split(""),args=[];osc.readArgumentsIntoArray(args,argTypes,typeTagString,dv,options,offsetState);
return args};osc.readArgument=function(argType,typeTagString,dv,options,offsetState){var typeSpec=osc.argumentTypes[argType];if(!typeSpec)throw Error("'"+argType+"' is not a valid OSC type tag. Type tag string was: "+typeTagString);typeTagString=osc[typeSpec.reader](dv,offsetState);options.metadata&&(typeTagString={type:argType,value:typeTagString});return typeTagString};osc.readArgumentsIntoArray=function(arr,argTypes,typeTagString,dv,options,offsetState){for(var i=0;i<argTypes.length;){var argType=
argTypes[i];if("["===argType){var arg=argTypes.slice(i+1);argType=arg.indexOf("]");if(0>argType)throw Error("Invalid argument type tag: an open array type tag ('[') was found without a matching close array tag ('[]'). Type tag was: "+typeTagString);arg=arg.slice(0,argType);arg=osc.readArgumentsIntoArray([],arg,typeTagString,dv,options,offsetState);i+=argType+2}else arg=osc.readArgument(argType,typeTagString,dv,options,offsetState),i++;arr.push(arg)}return arr};osc.writeArguments=function(args,options){args=
osc.collectArguments(args,options);return osc.joinParts(args)};osc.joinParts=function(dataCollection){var buf=new Uint8Array(dataCollection.byteLength);dataCollection=dataCollection.parts;for(var offset=0,i=0;i<dataCollection.length;i++){var part=dataCollection[i];osc.copyByteArray(part,buf,offset);offset+=part.length}return buf};osc.addDataPart=function(dataPart,dataCollection){dataCollection.parts.push(dataPart);dataCollection.byteLength+=dataPart.length};osc.writeArrayArguments=function(args,dataCollection){for(var typeTag=
"[",i=0;i<args.length;i++)typeTag+=osc.writeArgument(args[i],dataCollection);return typeTag+"]"};osc.writeArgument=function(arg,dataCollection){if(osc.isArray(arg))return osc.writeArrayArguments(arg,dataCollection);var writer=osc.argumentTypes[arg.type].writer;writer&&(writer=osc[writer](arg.value),osc.addDataPart(writer,dataCollection));return arg.type};osc.collectArguments=function(args,options,dataCollection){osc.isArray(args)||(args="undefined"===typeof args?[]:[args]);dataCollection=dataCollection||
{byteLength:0,parts:[]};options.metadata||(args=osc.annotateArguments(args));var typeTagString=",";options=dataCollection.parts.length;for(var i=0;i<args.length;i++)typeTagString+=osc.writeArgument(args[i],dataCollection);args=osc.writeString(typeTagString);dataCollection.byteLength+=args.byteLength;dataCollection.parts.splice(options,0,args);return dataCollection};osc.readMessage=function(data,options,offsetState){options=options||osc.defaults;data=osc.dataView(data,data.byteOffset,data.byteLength);
offsetState=offsetState||{idx:0};var address=osc.readString(data,offsetState);return osc.readMessageContents(address,data,options,offsetState)};osc.readMessageContents=function(address,dv,options,offsetState){if(0!==address.indexOf("/"))throw Error("A malformed OSC address was found while reading an OSC message. String was: "+address);dv=osc.readArguments(dv,options,offsetState);return{address,args:1===dv.length&&options.unpackSingleArgs?dv[0]:dv}};osc.collectMessageParts=function(msg,options,dataCollection){dataCollection=
dataCollection||{byteLength:0,parts:[]};osc.addDataPart(osc.writeString(msg.address),dataCollection);return osc.collectArguments(msg.args,options,dataCollection)};osc.writeMessage=function(msg,options){options=options||osc.defaults;if(!osc.isValidMessage(msg))throw Error("An OSC message must contain a valid address. Message was: "+JSON.stringify(msg,null,2));msg=osc.collectMessageParts(msg,options);return osc.joinParts(msg)};osc.isValidMessage=function(msg){return msg.address&&0===msg.address.indexOf("/")};
osc.readBundle=function(dv,options,offsetState){return osc.readPacket(dv,options,offsetState)};osc.collectBundlePackets=function(bundle,options,dataCollection){dataCollection=dataCollection||{byteLength:0,parts:[]};osc.addDataPart(osc.writeString("#bundle"),dataCollection);osc.addDataPart(osc.writeTimeTag(bundle.timeTag),dataCollection);for(var i=0;i<bundle.packets.length;i++){var packet=bundle.packets[i];packet=(packet.address?osc.collectMessageParts:osc.collectBundlePackets)(packet,options);dataCollection.byteLength+=
packet.byteLength;osc.addDataPart(osc.writeInt32(packet.byteLength),dataCollection);dataCollection.parts=dataCollection.parts.concat(packet.parts)}return dataCollection};osc.writeBundle=function(bundle,options){if(!osc.isValidBundle(bundle))throw Error("An OSC bundle must contain 'timeTag' and 'packets' properties. Bundle was: "+JSON.stringify(bundle,null,2));options=options||osc.defaults;bundle=osc.collectBundlePackets(bundle,options);return osc.joinParts(bundle)};osc.isValidBundle=function(bundle){return void 0!==
bundle.timeTag&&void 0!==bundle.packets};osc.readBundleContents=function(dv,options,offsetState,len){for(var timeTag=osc.readTimeTag(dv,offsetState),packets=[];offsetState.idx<len;){var packetSize=osc.readInt32(dv,offsetState);packetSize=osc.readPacket(dv,options,offsetState,offsetState.idx+packetSize);packets.push(packetSize)}return{timeTag,packets}};osc.readPacket=function(data,options,offsetState,len){data=osc.dataView(data,data.byteOffset,data.byteLength);len=void 0===len?data.byteLength:len;
offsetState=offsetState||{idx:0};var header=osc.readString(data,offsetState),firstChar=header[0];if("#"===firstChar)return osc.readBundleContents(data,options,offsetState,len);if("/"===firstChar)return osc.readMessageContents(header,data,options,offsetState);throw Error("The header of an OSC packet didn't contain an OSC address or a #bundle string. Header was: "+header);};osc.writePacket=function(packet,options){if(osc.isValidMessage(packet))return osc.writeMessage(packet,options);if(osc.isValidBundle(packet))return osc.writeBundle(packet,
options);throw Error("The specified packet was not recognized as a valid OSC message or bundle. Packet was: "+JSON.stringify(packet,null,2));};osc.argumentTypes={i:{reader:"readInt32",writer:"writeInt32"},h:{reader:"readInt64",writer:"writeInt64"},f:{reader:"readFloat32",writer:"writeFloat32"},s:{reader:"readString",writer:"writeString"},S:{reader:"readString",writer:"writeString"},b:{reader:"readBlob",writer:"writeBlob"},t:{reader:"readTimeTag",writer:"writeTimeTag"},T:{reader:"readTrue"},F:{reader:"readFalse"},
N:{reader:"readNull"},I:{reader:"readImpulse"},d:{reader:"readFloat64",writer:"writeFloat64"},c:{reader:"readChar32",writer:"writeChar32"},r:{reader:"readColor",writer:"writeColor"},m:{reader:"readMIDIBytes",writer:"writeMIDIBytes"}};osc.inferTypeForArgument=function(arg){switch(typeof arg){case "boolean":return arg?"T":"F";case "string":return"s";case "number":return"f";case "undefined":return"N";case "object":if(null===arg)return"N";if(arg instanceof Uint8Array||arg instanceof ArrayBuffer)return"b";
if("number"===typeof arg.high&&"number"===typeof arg.low)return"h"}throw Error("Can't infer OSC argument type for value: "+JSON.stringify(arg,null,2));};osc.annotateArguments=function(args){for(var annotated=[],i=0;i<args.length;i++){var arg=args[i];arg="object"===typeof arg&&arg.type&&void 0!==arg.value?arg:osc.isArray(arg)?osc.annotateArguments(arg):{type:osc.inferTypeForArgument(arg),value:arg};annotated.push(arg)}return annotated};osc.isCommonJS&&(module.exports=osc)})()}
//# sourceMappingURL=module$node_modules$osc$src$osc.js.map
