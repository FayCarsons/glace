{
"version":3,
"file":"module$node_modules$osc$src$osc_transports.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/osc/src/osc-transports.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$osc$src$osc_transports\"] = function(global,require,module,exports) {\n/*\n * osc.js: An Open Sound Control library for JavaScript that works in both the browser and Node.js\n *\n * Cross-platform base transport library for osc.js.\n *\n * Copyright 2014-2016, Colin Clark\n * Licensed under the MIT and GPL 3 licenses.\n */\n\n/* global require, module */\n\nvar osc = osc || require(\"./osc.js\"),\n    slip = slip || require(\"slip\"),\n    EventEmitter = EventEmitter || require(\"events\").EventEmitter;\n\n(function () {\n\n    \"use strict\";\n\n    osc.supportsSerial = false;\n\n    // Unsupported, non-API function.\n    osc.firePacketEvents = function (port, packet, timeTag, packetInfo) {\n        if (packet.address) {\n            port.emit(\"message\", packet, timeTag, packetInfo);\n        } else {\n            osc.fireBundleEvents(port, packet, timeTag, packetInfo);\n        }\n    };\n\n    // Unsupported, non-API function.\n    osc.fireBundleEvents = function (port, bundle, timeTag, packetInfo) {\n        port.emit(\"bundle\", bundle, timeTag, packetInfo);\n        for (var i = 0; i < bundle.packets.length; i++) {\n            var packet = bundle.packets[i];\n            osc.firePacketEvents(port, packet, bundle.timeTag, packetInfo);\n        }\n    };\n\n    osc.fireClosedPortSendError = function (port, msg) {\n        msg = msg || \"Can't send packets on a closed osc.Port object. Please open (or reopen) this Port by calling open().\";\n\n        port.emit(\"error\", msg);\n    };\n\n    osc.Port = function (options) {\n        this.options = options || {};\n        this.on(\"data\", this.decodeOSC.bind(this));\n    };\n\n    var p = osc.Port.prototype = Object.create(EventEmitter.prototype);\n    p.constructor = osc.Port;\n\n    p.send = function (oscPacket) {\n        var args = Array.prototype.slice.call(arguments),\n            encoded = this.encodeOSC(oscPacket),\n            buf = osc.nativeBuffer(encoded);\n\n        args[0] = buf;\n        this.sendRaw.apply(this, args);\n    };\n\n    p.encodeOSC = function (packet) {\n        // TODO gh-39: This is unsafe; we should only access the underlying\n        // buffer within the range of its view.\n        packet = packet.buffer ? packet.buffer : packet;\n        var encoded;\n\n        try {\n            encoded = osc.writePacket(packet, this.options);\n        } catch (err) {\n            this.emit(\"error\", err);\n        }\n\n        return encoded;\n    };\n\n    p.decodeOSC = function (data, packetInfo) {\n        data = osc.byteArray(data);\n        this.emit(\"raw\", data, packetInfo);\n\n        try {\n            var packet = osc.readPacket(data, this.options);\n            this.emit(\"osc\", packet, packetInfo);\n            osc.firePacketEvents(this, packet, undefined, packetInfo);\n        } catch (err) {\n            this.emit(\"error\", err);\n        }\n    };\n\n\n    osc.SLIPPort = function (options) {\n        var that = this;\n        var o = this.options = options || {};\n        o.useSLIP = o.useSLIP === undefined ? true : o.useSLIP;\n\n        this.decoder = new slip.Decoder({\n            onMessage: this.decodeOSC.bind(this),\n            onError: function (err) {\n                that.emit(\"error\", err);\n            }\n        });\n\n        var decodeHandler = o.useSLIP ? this.decodeSLIPData : this.decodeOSC;\n        this.on(\"data\", decodeHandler.bind(this));\n    };\n\n    p = osc.SLIPPort.prototype = Object.create(osc.Port.prototype);\n    p.constructor = osc.SLIPPort;\n\n    p.encodeOSC = function (packet) {\n        // TODO gh-39: This is unsafe; we should only access the underlying\n        // buffer within the range of its view.\n        packet = packet.buffer ? packet.buffer : packet;\n        var framed;\n\n        try {\n            var encoded = osc.writePacket(packet, this.options);\n            framed = slip.encode(encoded);\n        } catch (err) {\n            this.emit(\"error\", err);\n        }\n\n        return framed;\n    };\n\n    p.decodeSLIPData = function (data, packetInfo) {\n        // TODO: Get packetInfo through SLIP decoder.\n        this.decoder.decode(data, packetInfo);\n    };\n\n\n    // Unsupported, non-API function.\n    osc.relay = function (from, to, eventName, sendFnName, transformFn, sendArgs) {\n        eventName = eventName || \"message\";\n        sendFnName = sendFnName || \"send\";\n        transformFn = transformFn || function () {};\n        sendArgs = sendArgs ? [null].concat(sendArgs) : [];\n\n        var listener = function (data) {\n            sendArgs[0] = data;\n            data = transformFn(data);\n            to[sendFnName].apply(to, sendArgs);\n        };\n\n        from.on(eventName, listener);\n\n        return {\n            eventName: eventName,\n            listener: listener\n        };\n    };\n\n    // Unsupported, non-API function.\n    osc.relayPorts = function (from, to, o) {\n        var eventName = o.raw ? \"raw\" : \"osc\",\n            sendFnName = o.raw ? \"sendRaw\" : \"send\";\n\n        return osc.relay(from, to, eventName, sendFnName, o.transform);\n    };\n\n    // Unsupported, non-API function.\n    osc.stopRelaying = function (from, relaySpec) {\n        from.removeListener(relaySpec.eventName, relaySpec.listener);\n    };\n\n\n    /**\n     * A Relay connects two sources of OSC data together,\n     * relaying all OSC messages received by each port to the other.\n     * @constructor\n     *\n     * @param {osc.Port} port1 the first port to relay\n     * @param {osc.Port} port2 the second port to relay\n     * @param {Object} options the configuration options for this relay\n     */\n    osc.Relay = function (port1, port2, options) {\n        var o = this.options = options || {};\n        o.raw = false;\n\n        this.port1 = port1;\n        this.port2 = port2;\n\n        this.listen();\n    };\n\n    p = osc.Relay.prototype = Object.create(EventEmitter.prototype);\n    p.constructor = osc.Relay;\n\n    p.open = function () {\n        this.port1.open();\n        this.port2.open();\n    };\n\n    p.listen = function () {\n        if (this.port1Spec && this.port2Spec) {\n            this.close();\n        }\n\n        this.port1Spec = osc.relayPorts(this.port1, this.port2, this.options);\n        this.port2Spec = osc.relayPorts(this.port2, this.port1, this.options);\n\n        // Bind port close listeners to ensure that the relay\n        // will stop forwarding messages if one of its ports close.\n        // Users are still responsible for closing the underlying ports\n        // if necessary.\n        var closeListener = this.close.bind(this);\n        this.port1.on(\"close\", closeListener);\n        this.port2.on(\"close\", closeListener);\n    };\n\n    p.close = function () {\n        osc.stopRelaying(this.port1, this.port1Spec);\n        osc.stopRelaying(this.port2, this.port2Spec);\n        this.emit(\"close\", this.port1, this.port2);\n    };\n\n\n    // If we're in a require-compatible environment, export ourselves.\n    if (typeof module !== \"undefined\" && module.exports) {\n        module.exports = osc;\n    }\n}());\n\n};"],
"names":["shadow$provide","global","require","module","exports","osc","slip","EventEmitter","supportsSerial","firePacketEvents","osc.firePacketEvents","port","packet","timeTag","packetInfo","address","emit","fireBundleEvents","osc.fireBundleEvents","bundle","i","packets","length","fireClosedPortSendError","osc.fireClosedPortSendError","msg","Port","osc.Port","options","on","decodeOSC","bind","p","prototype","Object","create","constructor","send","p.send","oscPacket","args","Array","slice","call","arguments","encoded","encodeOSC","buf","nativeBuffer","sendRaw","apply","p.encodeOSC","buffer","writePacket","err","p.decodeOSC","data","byteArray","readPacket","undefined","SLIPPort","osc.SLIPPort","that","o","useSLIP","decoder","Decoder","onMessage","onError","decodeHandler","decodeSLIPData","framed","encode","p.decodeSLIPData","decode","relay","osc.relay","from","to","eventName","sendFnName","transformFn","sendArgs","concat","listener","relayPorts","osc.relayPorts","raw","transform","stopRelaying","osc.stopRelaying","relaySpec","removeListener","Relay","osc.Relay","port1","port2","listen","open","p.open","p.listen","port1Spec","port2Spec","close","closeListener","p.close"]
}
